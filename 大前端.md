# 大前端

### 1.安装cnpm淘宝镜像
```
npm install -g cnpm --registry=https://registry.npm.taobao.org
```

### 2.安装vue-cli
```
1.全局安装: cnpm install -g @vue/cli
2.查看vue-cli版本: vue --version
3.全局安装快速开发指令: cnpm install -g @vue/cli-service-global
``` 

### 3.CentOS
```
1.https://wiki.centos.org/Download#
2.http://mirrors.aliyun.com/centos/7.7.1908/isos/x86_64/
```

### 4.ubuntu是基于debain

### 5.使用ssh连接服务器
```
1.ssh -p 远程端口号 远程用户名@远程主机地址
2.service sshd status 查看ssh当前运行状态
  service ssh status (ubuntu)
3.netstat -anlp | grep sshd 查找默认监听端口
  vi /etc/ssh/sshd_config
```
* 修改ssh的默认端口
```
1.vi /etc/ssh/sshd_config
2.删除'#', Port 22 >>> Port 10022
3.:wq, 保存退出
4.执行semanage port -a -t ssh_port_t -p tcp 10022
5.解决semanage命令不存在的问题:
反查命令: yum whatprovides semanage
观察哪个包里面有: policycoreutils-python-2.5-33.el7.x86_64
截取包名: policycoreutils-python
安装包: yum install -y policycoreutils-python
重新执行命令: semanage port -a -t ssh_port_t -p tcp 10022
检查是否修改成功: semanage port -l | grep ssh

* 如果有多余端口
删除多余端口: semanage port -d -t ssh_port_t -p tcp 27000

重新ssh: service sshd restart

```
* 使用免密的方式登录远程服务器
```
1.cd ~/.ssh 切换到本机密钥目录, 有id_rsa.pub文件
2.ssh-keygen 没有id_rsa.pub文件, 键入命令生成
3.vi config 修改本地的ssh文件配置
4.把本地生成的公钥id_rsa.pub放到远程服务器的~/.ssh目录下面 (不要邮箱)
5.ssh登录远程服务器
cd ~/.ssh
创建authorized_keys目录(如果没有的话)
mkdir -p ~/.ssh
6.vi authorized_keys
7.将本地公钥添加到authorized_keys中
8.在本机的~/.ssh/config文件添加配置: 

vi config

Host tencentCloud
    Port 10022
    HostName 106.54.11.45
    User root
    IdentityFile ~/.ssh/id_rsa
    IdentitiesOnly yes

:wq保存


备注: 如果没有成功免密登录, 可以重新生成密钥:
ssh-keygen -t rsa -C '你的邮箱'
```

### 6.linux命令
```
1.cat /etc/hostname 查看主机名
2.lsb_release -a 查看主机操作系统
3.uname -a 查看linux内核版本
4.df 查看磁盘空间占用情况(单位:k)
5.df -Th 查看磁盘空间占用情况(单位:G)

linux目录&文件权限
6.cd / 根目录
7.ls -la 
8.drwxrwxrwx
d: 表示文件夹
rwx: 用户权限
rwx: 组权限
rwx: 其他用户权限

9./home --- 个人目录
10./etc --- 软件配置文件
11./sys --- 系统目录
12./usr --- 系统可执行文件
13./var --- 日志文件

cpu/内存/进程
14.top --- 查看linux运行的进程

linux常见命令&指令
15.文档型
(1)touch --- 创建
(2)cat
(3)echo
追加: echo '123123' >> test.txt
覆盖: echo 'hello world' > test.txt
(4)rm
删除文件: rm test.txt
删除文件夹: rm -r test
(5)vi
(6)cd

16.硬件型
(1)磁盘
(2)进程
ps -ef | grep ssh
(3)服务
查看: service sshd status
停止: service sshd stop
重启: service sshd restart
(4)网络

17.功能型
(1)压缩/解压
解压: tar zxvf httpd-2.4.41.tar.gz 
压缩: tar zcvf httpd-2.4.4100.tar.gz httpd-2.4.41
压缩后的文件名: httpd-2.4.4100.tar.gz
压缩内容: httpd-2.4.41
(2)下载 
wget http://mirrors.tuna.tsinghua.edu.cn/apache//httpd/httpd-2.4.41.tar.gz
(3)远程

18.保存和不保存
(1):wq --- 对文件进行保存
(2):q! --- 不对文件进行保存
```

### 7.虚拟机
```
1.windows --- Hyper-V
2.mac --- Parallels Desktop
3.linux --- VitualBox
4.跨平台 --- Vmware
```

### 8.docker入门
1.基础设施: cpu, 内存, 存储资源       
2.操作系统      
3.Docker: 这个服务, 这个进程        
4.在这个服务/进程上可以运行很多的应用App1, App2, App3, ...       

截图: 


5.Docker和虚拟机的区别
* Docker --- App共用操作系统
```
文件系统隔离 --- 每个进程容器运行在完全独立的根文件系统里。
资源隔离 --- 可以使用cgroup为每个进程容器分配不同的系统资源，例如CPU和内存。 
网络隔离 --- 每个进程容器运行在自己的网络命名空间里，拥有自己的虚拟接口和IP地址。 
变更管理 --- 容器文件系统的变更可以提交到新的映像中，并可重复使用以创建更多的容器。无需使用模板或手动配置。
日志记录 --- Docker将会收集和记录每个进程容器的标准流（stdout/stderr/stdin），用于实时检索或批量检索。
写时复制 --- 采用写时复制方式创建根文件系统，这让部署变得极其快捷，并且节省内存和硬盘空间。
交互式Shell：Docker可以分配一个虚拟终端并关联到任何容器的标准输入上，例如运行一个一次性交互shell。
```
* 虚拟机 --- 每个App对应单独的操作系统

6.安装docker
```
(1)安装文档: https://docs.docker.com/install/linux/docker-ce/centos/
(2)删除之前安装的版本:
sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine

(3)安装依赖:
$ sudo yum install -y yum-utils \
  device-mapper-persistent-data \
  lvm2

(4)添加Docker源
sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo

(5)安装Docker
 sudo yum install docker-ce docker-ce-cli containerd.io

(6)启动Docker
systemctl start docker

(7)查看Docker
systemctl status docker

(8)运行测试
docker run hello-world --- 没有在本地找到hello-world镜像包, 所以从远程拉取dockerhub

(9)查看Docker中镜像的运行状态
docker ps -a
 
(10)docker中国官方镜像加速
https://www.kancloud.cn/docker_practice/docker_practice/469780
* 修改/etc/docker/daemon.json 
* 添加
{
  "registry-mirrors": [
    "https://registry.docker-cn.com"
  ]
}
* 重启docker容器
  $ sudo systemctl daemon-reload
  $ sudo systemctl restart docker

(11)docker删除已经停止的容器
docker rm 容器名称NAMES/容器id
备注: 容器必须停止, 才能删除容器
docker stop 容器名称NAMES/容器id

(12)docker运行mysql
$ docker run --name some-mysql -v /my/own/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql
some-mysql: 名字, 可以修改
my-secret-pw: 密码, 可以修改
-d: 表示后台运行d

(13)docker启动镜像
docker start some-mysql

(14)docker持续打印日志
docker logs -f some-mysql

(15)映射端口
docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -p 28001:3306 -d mysql
28001: 表示远程服务器端口
3306: 表示docker容器内部的端口

写时复制: 把镜像写到远程服务器

(16)NaviCat远程连接mysql, 查看结果
* 编辑连接
* 主机名: 106.54.11.45
* 端口: 28001
* 用户名: root
* 密码: MYSQL_ROOT_PASSWORD=my-secret-pw (注意: mysql的密码, 不是云服务器的密码)

(17)docker.run和docket.start
docker run -itd --name mysql -p 3306:3306 -e=MYSQL_ROOT_PASSWORD=123456 mysql
* docker run 命令来创建
  
  itd交互式终端后台运行
  
  name指定容器名称
  
  p指定映射端口
  
  最后Mysql比较特殊，需要指定MYSQL_ROOT_PASSWORD变量
  
  + mysql镜像名称

docker start mysql -p 3306:3306 -e=MYSQL_ROOT_PASSWORD=123456 mysql
docker start -p 3306:3306 -e=MYSQL_ROOT_PASSWORD=123456 mysql
* start命令只能运行一个已经存在mysql容器，但是无法创建

docker run -p 3306:3306 -e=MYSQL_ROOT_PASSWORD=123456 mysql
* 正常创建并运行，但是退出终端后，可能会被停止Mysql


(18)拉取镜像
$ docker pull mongo:4

(19)在远程服务器的防火墙中, 放行端口 10050 --> 27017
方案一
关闭防火墙:
ubuntu: service ufw stop
centos: service firewalld stop

方案二: 添加到放行规则
firewall-cmd --zone=public --add-port=10050/tcp --permanent
firewall-cmd --reload
firewall-cmd --state
firewall-cmd --list-all 


mongo远程连接工具: Robo 3T, 图形化管理工具

(20)把App打包成镜像, 运行在docker环境中
 
```

7.docker-compose    
(1)使用一条命令运行多个镜像   
(2)使用一条命令管理多个镜像   
(3)docker-compose安装方式   
* 下载docker-compose    
```
sudo curl -L "https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```

* 给予执行权限
```
sudo chmod +x /usr/local/bin/docker-compose
```

* 查看docker-compose版本
```
docker-compose --version
```

* 使用docker-componse运行多个容器
```
(1)cd /home/

(2)vi docker-compose.yml

(3)模拟启动mysql1和mysql2服务
version: '3'
services:
  mysql1:
    image: mysql
    environment: 
    - MYSQL_ROOT_PASSWORD=123456
    ports: 
    - 28002:3306
    	
  mysql2:
    image: mysql
    environment: 
    - MYSQL_ROOT_PASSWORD=123456
    ports:
    - 28003:3306

--- 	 
environment: 环境变量

(4)docker-compose up -d (执行命令要在docker-compose.yml所在目录, 这里是/home)

(5)docker ps -a 查看结果

(6)使用navi cat测试结果

(7)停止所有服务: docker-compose stop

(8)删除所有服务: docker-compose rm

```

(4)Docker仓库(Docker hub)
1.hub.docker.com >>> explore		
2.注册账号
3.终端登录docker
```
(1)docker login

(2)使用docker提交

docker commit 容器Id dcj123/mysql:1.0

dcj123 >>> DockerHub前缀

mysql:4 >>> 需要推送镜像的名字

(3)查看镜像

docker images

(3-2)删除本地镜像

docker image rm e52f7aa4eaed(IMAGE ID)

(4)推送

docker push dcj123/mysql:1.0

(5)拉取镜像

docker pull dcj123/mysql:1.0

```

8.docker-compose错误总结:
```
(1)执行docker-compose up -d时出现ERROR: Failed to Setup IP tables: Unable to enable SKIP DNAT rule

解决重启docker: systemctl restart docker
```

9.node&&nvm版本管理工具   
(1)nodejs是免费, 开源, 跨平台(windows, linux, macos)    
(2-1)服务器上的JavaScript运行环境       
(2-2) 一般情况下, html、css、javascript是运行在浏览器上的   
(3)基于Chrome V8引擎, 事件驱动, 非阻赛式I/O   
(4)yarn安装    
```
下载安装: https://github.com/yarnpkg/yarn/releases

常用命令: yarn add/install/remove

安装命令: curl -o- -L https://yarnpkg.com/install.sh | bash

如果安装不成功, 多试几次, 网络原因
```

(5)nvm
```
下载地址: https://github.com/nvm-sh/nvm

下载命令: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash
         curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.1/install.sh | bash

添加配置: vi ~/.bash_profile

export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

注意: 如果没有, 退出服务器, 重新ssh连接, 解决

命令: 

nvm --version

nvm list

nvm ls-remote 查看远程node版本

nvm install v11.4.0 

```

(6)npm发布包
```
-- 初始化
mkdir sourceModule
cd sourceModule
npm init 
  - index.js
  - license: 开源协议ISC
创建package.json成功

-- 准备index.js
在sourceModule下创建index.js
function consoleFunc(arg) {
  console.log(arg);
}
module.exports = consoleFunc;

-- 发布
npm config list >>> 查看配置

修改taobao远程仓库到github远程仓库

npm set registry https://registry.npmjs.org/

npm login >>> npm账户注册

npm publish

错误: 

403 Forbidden - PUT https://registry.npmjs.org/dcj-imooc - you must verify your email before publishing a new package: https://www.npmjs.com/email-edit

原因: 邮箱没有验证


--- npm账户注册, 登录, 邮箱(需要验证)

npm whoami >>> 查看是否登录

--- 使用
mkdir useModule
npm init --- 创建新项目
yarn add imooc-publish(发布的包)

index.js
const func = require('imooc-publish');
node index.js >>> 查看结果

package.json 
{
  "scripts": {
    "start": "node index.js"
  }
}

yarn start 

```

9.WebStorm和VSCode
* 插件关键词: snippets(代码提示), syntax(语法), beautify(代码格式化)
* 知乎: 玩转VS Code栏目
* 懒人vue插件安装包: vue extension pack
* 懒人react插件安装包: ES7 React/Redux/GraphQL/React-Native
* 懒人nodejs插件安装包: nodejs extension pack



### 开发准备 --- 接口测试
* 版本控制
* 可视化编辑
* 接口化测试 + Mockjs数据两个部分

#### Restful API介绍
* 常见接口测试工具的作用:
  - 测试后台开发人员提供的接口
  - 前端开发中测试

* 4种常见的接口测试工具对比
  - 平台类
    - DOClever = element + node+mongodb + 桌面端
      - 平台类缺点: 无法请求到本地
      - DOClever桌面端: 可以请求本地数据
  - 插件类
    - Postman, DHC, RestClient
  - 客户端类
    - Postman, DOClever

* Postman使用中遇到的问题
  - 使用post请求, express接收不到请求参数req.body
    - 解决: 使用Body/raw/ + 输入数据 + 调整数据格式为JSON(application/json) 
  
* DOClever
  - 版本管理
  - mock数据

* REST特点
  - 客户端-服务端: 通过将用户界面, 让数据和存储分开, 通过简化服务器组件来实现跨多平台应用. 
  - 无状态-可缓存: 
    - 无状态, 服务器不会存储这次请求的. 
    - 可缓存, 比如权重缓存, 有没有这个资源访问
  - 统一接口: 
    - 规定了请求类型(GET, POST, PUT, DELETE)
    - 规定了数据请求格式(文件, 图片, 字符串, ...)
  - Restful API就是满足Restful特点的应用接口.

* 

#### Mock介绍
* 效率开发: 前后端同时开发
* 模拟交互于全过程
* 全量数据测试极端情况
* 常用工具:
  - DOClever
  - Mockjs(重点)
  - POSTMAN 

* 什么是Mock数据
  - 模拟真实接口
    - 实现效率开发， 前后台同步，特别是分布式系统
  - 虚拟业务场景
    - 某些开发场景非常难触发，还有一些异常逻辑，交互逻辑
  - 临界开发

* Mock数据工具:
* 本地安装接口测试工具: (重点)
  - Mock数据开发流程
    - 前端定义接口
    - 完成静态页面
    - 完成UI交互(使用mock)
    - 对接真实接口
    - 页面/逻辑测试
    - 线上部署
  - DOClever安装
    - 线下部署/github下载
    - 使用docker-compose来安装DOClever
    - ssh连接远程服务器
    - 切换到/home目录下, cd /home
    - 创建doclever文件夹
    - vi docker-compose.yml
    - 复制/粘贴到docker-compose.yml, 保存/退出
    ```
      version: "2"
      services:
        DOClever:
          image: lw96/doclever
          restart: always
          container_name: "DOClever"
          ports:
          - 10040:10000
          volumes:
          - /srv/doclever/file:/root/DOClever/data/file // 表示/home/doclever/srv/doclever...
          - /srv/doclever/img:/root/DOClever/data/img
          - /srv/doclever/tmp:/root/DOClever/data/tmp
          environment:
          - DB_HOST=mongodb://mongo:27017/DOClever
          - PORT=10000
          links:
          - mongo:mongo

        mongo:
          image: mongo:latest
          restart: always
          container_name: "mongodb"
          volumes:
          - /srv/doclever/db:/data/db
    ```
    - 启动docker-compose, docker-compose up -d
    - docker ps | grep doclever
    - 放行20080端口, firewall-cmd --zone=public --add-port=10040/tcp --permanent
    - 重启防火墙, firewall-cmd --reload
    - 查看当前防火墙配置, firewall-cmd --list-all
    - 在本机浏览器上输入: http://106.54.11.45:10040(http://106.54.11.45:10040/html/web/controller/index/index.html)
    - 登录 >>> 管理总后台 >>> 用户名/密码都是DOClever >>> 登录后修改密码 >>> 设置 >>> 修改密码为123132
    - 注册新用户开始使用
  - DOClever中Mock数据开发使用简介
    - 特点:
    - 可以完成mock数据开发。当开发完成后, 去设定这个接口是否开发完成
      - 开发完成 >>> 真实接口
      - 开发未完成 >>> mock数据接口
    - 提供接口版本控制
    - 使用
      - 创建文件夹
      - 创建接口
      - 导入返回mock数据(注意JSON格式)
      - 选择mockServer
    - 设置
      - 下载net.js
      - node net.js http://106.54.11.45:10040/mock/5e104cc7821ce9000b6e2566 http://localhost:8081(真实服务器地址)
      - 切换到net.js目录 >>> cd /Downloads
      - 执行node net.js http://106.54.11.45:10040/mock/5e104cc7821ce9000b6e2566 http://localhost:8081(真实服务器地址)
      - 内网测试，Mock数据正监听端口：36742
      - 在postman上调用post, 发起请求: http://localhost:36742/api/v1/users/login
      - 如果没有拿到数据, 切换发送的数据类型(text?json?或者其他)


* 使用Mock.js进行Mock数据开发
  - Mock.jsj简介
    - 安装&起步
    - 语法规范
      - 数据模版定义规范 (定义模拟数据的结构框架)
          ```
          <!DOCTYPE html>
          <html lang="en">

          <head>
              <meta charset="utf-8" />
              <title>React App</title>
              <script src="http://mockjs.com/dist/mock.js"></script>

          </head>

          <body>
              <script>
                  var data = Mock.mock({
                      'list|1-10': [
                          {
                              'id|+1': 1,
                              'name': '@cname' // @占位符就是Mock.random() === 数据占位符定义规范 
                          }
                      ]
                  });
                  console.log(JSON.stringify(data, null, 2));
              </script>
          </body>

          </html>
          ```
      - 数据占位符定义规范 (定义模拟数据的内容， Mock.random()随机生成的内容)
          ```
            <script>
              var random = Mock.Random;
              var friends = ['xiaozhang', 'xiaowang', 'xiaochen'];
              var data = {
                  email: random.email(),
                  image: random.image('125x125', '#00405d', '#fff', 'mockjs'),
                  name: random.name(),
                  url: random.url(),
                  address: random.city(),
                  friend: random.pick(friends)
              };
              console.log(JSON.stringify(data, null, 2));
              // 具体使用可以查阅文档
            </script>
          ```
    - 拦截请求
    - 